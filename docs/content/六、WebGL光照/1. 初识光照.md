# 1. 初识光照

经过前一章节的学习，相信大家跟我一样已经初入3D的大门了，也对MVP变换有所了解了。这一章，我们开始进入跟3D图形效果息息相关的另一个知识点——光照的学习。我个人感觉光照对3D效果是非常重要的一环，回想小时候画素描画的时候，都会通过阴影的深浅不一来凸显物体的立体感！

## 光源

光源类型：
1. 平行光。方向和颜色。
2. 点光源。点光源的位置和颜色。
3. 环境光。颜色。

## 反射类型

反射光的方向，颜色取决于入射光和物体的表面类型。

物体表面的光线反射分两种：
1. 漫反射。
2. 环境反射。

### 漫反射
漫反射光颜色取决：
1. 入射光颜色
2. 物体表面颜色
3. 入射光与表面的夹角`θ`。入射角为**入射光线**与**物体表面的法线**的夹角。

漫反射颜色 = 入射光颜色 x 表面颜色 x `cosθ`（颜色相乘为各矢量之间相乘）

当`θ`为0度时，入射光与表面**垂直**，`cosθ` 的值为`1`，正射表面。
当`θ`为90度时，入射光与表面**平行**，`cosθ` 的值为`0`，没有照射到物体表面，为黑色（符合常识）。

### 环境反射

环境反射的入射光，可以看作是漫**反射光方向的反方向**。环境光照射物体各方向均匀，强度相等。

环境反射光 = 入射光颜色 x 表面基底色

同时存在漫反射和环境反射，物体的最终表现颜色为二者之和。

表面反射光颜色 = 漫反射颜色 + 环境反射颜色

### 计算入射角`θ`

核心：通过矢量的点积计算 `cosθ`。如下点积的计算公式：

![2.4](../../public/images/fourth/2.4.png)

cosθ = 光线方向 · 法线方向

漫反射颜色公式变换：
漫反射颜色 = 入射光颜色 x 表面颜色 x (光线方向 · 法线方向)

注意点：
1. 光线方向矢量、法线方向矢量需要**归一化**处理。
2. 光线的方向为入射方向的**反方向**。


## 法线方向

法线方向即为物体表面的朝向。

**法向量和位置无关**。比如一个平面的所有点的法向量都是同一个。

:::demo
sixth/1_1
:::